<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
<title>실시간 금융 대시보드 - 자비스</title>

<!-- TradingView Core (Advanced Chart) -->
<script src="https://s3.tradingview.com/tv.js"></script>

<style>
:root{
  --bg:#0b1220;
  --text:#e7eefc;
  --muted:#9aa4b2;
  --border:rgba(255,255,255,.18);
  --card-bg:rgba(255,255,255,.10);
  --up-color:#ff4d4d;
  --down-color:#4facfe;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans KR",sans-serif;
  background:radial-gradient(1200px 600px at 10% 0%, #152447 0%, var(--bg) 55%);
  color:var(--text);
  line-height: 1.5;
}

/* ===== 요약 패널: 다시 "세로" ===== */
.summary-container{
  padding:16px;
  background:rgba(0,0,0,.10);
}

.summary-header{
  font-size:13px;
  font-weight:800;
  color:var(--muted);
  margin-bottom:15px;
  letter-spacing:1px;
}

.summary-grid{
  display:flex;
  flex-direction:column; /* ✅ 항상 세로 */
  gap:12px;
}

.summary-card{
  min-height:110px;
  padding:12px;
  border-radius:18px;
  background:var(--card-bg);
  border:1px solid var(--border);
  display:flex;
  flex-direction:column;
  justify-content:center;
}

/* 네이버 스타일 미국채 박스 */
.naver-box{
  text-decoration:none;
  color:inherit;
  cursor:pointer;
  transition:transform 0.2s;
}
.naver-box:active { transform: scale(0.98); }
.naver-label { font-size: 14px; color: var(--muted); margin-bottom: 5px; }
.naver-price { font-size: 28px; font-weight: 800; color: var(--up-color); display: flex; align-items: baseline; gap: 8px;}
.naver-change { font-size: 14px; font-weight: 500; }

/* ===== 메인 차트 영역 ===== */
main{
  max-width: 1200px;
  margin: 0 auto;
  padding: 10px 16px 60px;
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 16px;
}

.card{
  grid-column: span 12;
  border-radius: 20px;
  background: var(--card-bg);
  border: 1px solid var(--border);
  overflow: hidden;
}

.card header{
  padding: 14px 18px;
  font-size: 15px;
  font-weight: 700;
  background: rgba(255,255,255,0.05);
}

.widget{
  height: 380px;
}

/* 데스크탑: 차트만 2열 */
@media(min-width: 900px){
  .half { grid-column: span 6; }
}
</style>
</head>

<body>

<!-- ✅ TradingView가 URL 파라미터로 심볼을 덮어쓰는 현상 방지 -->
<script>
(function blockTVSymbolHijack(){
  try{
    const url = new URL(location.href);
    if (url.searchParams.has("tvwidgetsymbol")) {
      url.searchParams.delete("tvwidgetsymbol");
      history.replaceState({}, "", url.toString());
      location.reload();
    }
  }catch(e){}
})();
</script>

<div class="summary-container">
  <div class="summary-header">● MARKET SNAPSHOT</div>

  <!-- ✅ 요약: 세로 -->
  <div class="summary-grid">

    <div class="summary-card">
      <div class="tradingview-widget-container">
        <script src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
        {
          "symbol": "FX_IDC:USDKRW",
          "width": "100%",
          "colorTheme": "dark",
          "isTransparent": true,
          "locale": "kr"
        }
        </script>
      </div>
    </div>

    <div class="summary-card">
      <div class="tradingview-widget-container">
        <script src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
        {
          "symbol": "TVC:USOIL",
          "width": "100%",
          "colorTheme": "dark",
          "isTransparent": true,
          "locale": "kr"
        }
        </script>
      </div>
    </div>

    <!-- US10Y는 상단 요약 박스로만 유지(정확/안정), 차트는 제거 -->
    <a href="https://m.stock.naver.com/worldstock/index/US10Y" target="_blank" class="summary-card naver-box" rel="noopener">
      <div class="naver-label">미국 국채 10년 (US10Y)</div>
      <div class="naver-price">
        <span id="us10y-val">4.1670</span>
        <span class="naver-change" style="color:var(--down-color)">▼ 0.0120 (-0.29%)</span>
      </div>
      <div style="font-size:11px; color:var(--muted); margin-top:5px;">네이버 증권에서 실시간 확인 ></div>
    </a>

  </div>
</div>

<main>
  <section class="card half">
    <header>USD/KRW 환율 차트</header>
    <div id="tv_usdkrw" class="widget"></div>
  </section>

  <!-- ❌ 미국채 10년물 차트 섹션 완전 삭제 -->

  <section class="card half">
    <header>WTI 원유 선물 차트</header>
    <div id="tv_wti" class="widget"></div>
  </section>

  <section class="card half">
    <header>Brent 원유 선물 차트</header>
    <div id="tv_brent" class="widget"></div>
  </section>
</main>

<script>
function createChart(id, symbol){
  new TradingView.widget({
    autosize: true,
    symbol: symbol,
    interval: "60",
    timezone: "Asia/Seoul",
    theme: "dark",
    style: "1",
    locale: "kr",
    enable_publishing: false,
    hide_top_toolbar: true,
    hide_legend: false,
    allow_symbol_change: false,
    save_image: false,
    container_id: id
  });
}

window.addEventListener("load", function() {
  createChart("tv_usdkrw", "FX_IDC:USDKRW");
  createChart("tv_wti", "TVC:USOIL");
  createChart("tv_brent", "TVC:UKOIL");
});
</script>

</body>
</html>
